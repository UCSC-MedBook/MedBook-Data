<template name="editSubmission">
  {{print "editSubmission this:" this}}

  <div class="content-wrapper">
    {{#if this}} {{! if no data, invalid WranglerDocuments _id in URL }}

      {{> submissionFileList}}

      {{> fileUploader}}

      {{> reviewWranglerDocuments}}

      {{> listErrorsAndSubmit}}
    {{else}}
      {{! loading handled in the router }}
      {{> pageNotFound}}
    {{/if}}
  </div>
</template>

<template name="submissionFileList">
  <!-- TODO: pull out uploader from Telescope post, put in package -->
  <h2>Upload files</h2>
  {{#each files}}
    <div class="input-group">
      <div class="form-control">
        <i class="glyphicon glyphicon-file"></i>
        <span>
          {{file_name}}: {{status}}
        </span>
        {{#if error_description}}
          <span class="error-description">
            Error: {{error_description}}
          </span>
        {{/if}}
      </div>
      <a href="#" class="remove-this-file input-group-addon btn btn-default">
        Remove
      </a>

    </div><!-- /input-group -->
  {{/each}}
</template>

<template name="fileUploader">
  <!-- add from locally -->
  <span class="btn btn-default btn-file">
    Add files...
    <input id="upload-files-input" type="file" multiple>
  </span>

  <!-- add from the the web -->
  <form class="add-from-web-form">
    <!-- <input type="text" name="text" placeholder="Type to add new tasks" /> -->
    <div class="input-group">
      <input name="urlInput" type="text" class="form-control"
          placeholder="Enter URL here">
      <span class="input-group-btn">
        <button class="btn btn-default" type="submit">
          Add from the web
        </button>
      </span>
    </div><!-- /input-group -->
  </form>
</template>

<template name="listErrorsAndSubmit">
  {{#if hasErrors}}
    <h2>Errors</h2>
    <ul>
      {{#each errors}}
        <li>{{this}}</li>
      {{/each}}
    </ul>
  {{/if}}
  {{! TODO: only show in blue if every file is done processing }}
  {{! TODO: add git commit message }}
  <button id="submit-submission" type="button" class="btn btn-primary">
    Submit data
  </button>
</template>
