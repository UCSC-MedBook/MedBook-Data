<template name="editSubmission">
  {{print "editSubmission this:" this}}
  {{! TODO: name this something better }}

  {{#if this}}
    <h2>Files</h2>
    {{#each files}}
      <div class="input-group">
        <div class="form-control">
          <i class="glyphicon glyphicon-file"></i>
          <span class="fileinput-filename">
            {{file_name}}: {{status}}
          </span>
          {{#if error_description}}
            <span class="error-description">
              Error: {{error_description}}
            </span>
          {{/if}}
        </div>
        <a href="#" class="input-group-addon btn btn-default remove-this-file">
          Remove
        </a>

      </div>
    {{/each}}

    <span class="btn btn-default btn-file">
      Add files...
      <input id="upload-files-input" type="file" multiple>
    </span>

    <h2>Review data</h2>

    <div id="data-review" class="flex-container">
      {{> reviewSuperpathwayData}}

      {{#each reviewObjects}}
        {{> reviewObjectType}}
      {{/each}}
    </div>

    {{#if hasDocuments}}
      {{! TODO: only show in blue if every file is done processing }}
      {{! TODO: only show in blue if every subscription is ready }}
      <button id="submit-all-data" type="button" class="btn btn-primary">
        Submit data
      </button>
    {{else}}
      <span class="help-block">
        Upload files to review data...
      </span>
    {{/if}}

    {{! this is how you show schemas... TODO }}
    {{#each otherDocuments}} {{! things that don't fit elsewhere }}
      {{print 'this ::' this}}

    {{/each}}

  {{else}}
    {{! loading handled in the router }}
    {{> pageNotFound}}
  {{/if}}
</template>

<template name="reviewSuperpathwayData">
  {{#if hasDocuments}}
    <div id="superpathway-data-review" class="component-box">
      <h3>Superpathway data</h3>
      <div id="pan-superpathway-input">
        {{#autoForm id="superpathway-schema"
            schema=superpathwaySchema}}
          {{> afQuickFields name=""}} {{! we need that blank string }}

          <div class="form-group">
            <button type="submit" class="btn btn-primary">
              Apply to all objects
            </button>
          </div>
        {{/autoForm}}
      </div>
      <div id="superpathway-object-types" class="flex-container">
        {{#each reviewObjects}}
          {{> reviewObjectType}}
        {{/each}}
      </div>
    </div>
  {{/if}}
</template>
